# SliTaz package receipt v2.

PACKAGE="galculator"
VERSION="2.1.4"
CATEGORY="system-tools"
SHORT_DESC="Graphical scientific calculator"
MAINTAINER="pankso@slitaz.org"
LICENSE="GPL2"
WEB_SITE="http://galculator.mnim.org/"

TARBALL="$PACKAGE-$VERSION.tar.bz2"
WGET_URL="http://galculator.mnim.org/downloads/$TARBALL"

BUILD_DEPENDS="gtk+-dev flex intltool"

COOKOPTS="!pixmaps !menus"

compile_rules() {
	./configure \
		--disable-gtk3 \
		$CONFIGURE_ARGS &&
	fix libtool &&
	make &&
	make install || return 1

	sed -i 's|Icon=.*|Icon=accessories-calculator|;
		s|Categories=.*|Categories=Utility;Calculator;|' \
		$install/usr/share/applications/galculator.desktop
}

genpkg_rules() {
	copy @std
	rm -r $fs/usr/share/pixmaps
	find $fs -name '*gtk3*' -delete
	sed -i 's|^[ ]*||g' $fs/usr/share/galculator/ui/*
	DEPENDS="glib gtk+ pango"
}
