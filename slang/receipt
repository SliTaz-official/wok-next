# SliTaz package receipt v2.

PACKAGE="slang"
VERSION="2.2.4"
CATEGORY="development"
SHORT_DESC="S-Lang library"
MAINTAINER="erjo@slitaz.org"
LICENSE="GPL2"
WEB_SITE="http://www.jedsoft.org/slang/"

TARBALL="$PACKAGE-$VERSION.tar.bz2"
WGET_URL="ftp://space.mit.edu/pub/davis/slang/v${VERSION%.*}/$TARBALL"

BUILD_DEPENDS="pcre-dev oniguruma-dev libpng16-dev zlib-dev readline-dev"
SPLIT="slang-dev"

# Rules to configure and make the package.
compile_rules()
{
	./configure \
		--sysconfdir=/etc \
		--with-readline=gnu \
		$CONFIGURE_ARGS &&
	make -j1 &&
	make -j1 install_doc_dir=/usr/share/doc/slang-$VERSION \
		SLSH_DOC_DIR=/usr/share/doc/slang-$VERSION/slsh \
		install-all &&

	chmod -v 755 \
		$install/usr/lib/libslang.so.$VERSION \
		$install/usr/lib/slang/v2/modules/*.so
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	case $PACKAGE in
		slang)
			copy @std
			DEPENDS="libpng16 ncurses oniguruma pcre readline zlib"
			CONFIG_FILES="/etc/slsh.rc"
			;;
		*-dev) copy @dev;;
	esac
}
