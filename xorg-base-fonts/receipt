# SliTaz package receipt v2.

PACKAGE="xorg-base-fonts"
VERSION="1.2"
CATEGORY="x-window"
SHORT_DESC="X window base/minimal fonts from the Xorg project"
MAINTAINER="pankso@slitaz.org"
LICENSE="MIT"
WEB_SITE="https://www.x.org/wiki/"
REPOLOGY="-"

TARBALL="$PACKAGE-$VERSION.tar.gz"
WGET_URL="http://download.tuxfamily.org/slitaz/sources/fonts/$TARBALL"
PKG_RULE="std"

# Rules to configure and make the package.
compile_rules()
{
	f="$install/usr/share/fonts/X11"
	mkdir -p $f
	cp -r $src/fonts/misc $src/fonts/util $f
	rm -rf $f/misc/6x13-ISO8859-1.pcf.gz $f/misc/cursor.pcf.gz # libXfont buitins
	sed -i 6i\ '7x13B-ISO8859-1.pcf.gz -misc-fixed-bold-r-normal--13-120-75-75-c-70-iso8859-1' \
		$f/misc/fonts.dir
	find $install -type f -exec chmod 644 '{}' \;
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	copy @std
}

# Execute fc-cache when the package finish to install.
# It may be segfault without -f or -r
post_install() {
	chroot "$1/" /usr/bin/fc-cache -r
}
