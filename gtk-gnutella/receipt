# SliTaz package receipt.

PACKAGE="gtk-gnutella"
VERSION="1.1.13"
CATEGORY="network"
SHORT_DESC="p2p client"
MAINTAINER="allan316@gmail.com"
LICENSE="GPL2"
WEB_SITE="http://gtk-gnutella.sourceforge.net/en/?page=news"

TARBALL="$PACKAGE-$VERSION.tar.xz"
WGET_URL="$SF_MIRROR/$PACKAGE/$TARBALL"

BUILD_DEPENDS="zlib-dev gtk2-dev libxml2-dev glib-dev xorg-dev"

compile_rules() {
	./build.sh \
		--prefix=/usr \
		--disable-dbus \
		--disable-nls &&
	make $MAKEFLAGS install INSTALL_PREFIX=$install
}

genpkg_rules() {
	mkdir -p $fs/usr/bin
	mkdir -p $fs/usr/share/applications
	mkdir -p $fs/usr/share/pixmaps
	mkdir -p $fs/usr/share/gtk-gnutella/pixmaps
	cp -a $install/usr/bin/* $fs/usr/bin
	cp -a $install/usr/share/applications/* $fs/usr/share/applications/
	cp -a $install/usr/share/pixmaps/* $fs/usr/share/pixmaps
	cp -a $install/usr/share/gtk-gnutella/pixmaps/* $fs/usr/share/gtk-gnutella/pixmaps/
	DEPENDS="gnutls libgcrypt libgpg-error expat gtk2 libxml2 xorg-libX11 \
	xorg-libXau xorg-libXcomposite xorg-libXcursor xorg-libXdmcp xorg-libXext \
	xorg-libXfixes xorg-libXinerama xorg-libXrandr xorg-libXrender \
	xorg-libXdamage libtasn1"
}
