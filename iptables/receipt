# SliTaz package receipt v2.

PACKAGE="iptables"
VERSION="1.6.1"
EXTRAVERSION="_$kvers"
CATEGORY="security"
SHORT_DESC="Packet filtering framework (Firewall)"
MAINTAINER="pankso@slitaz.org"
LICENSE="GPL2"
WEB_SITE="http://www.netfilter.org/projects/iptables/"

TARBALL="$PACKAGE-$VERSION.tar.bz2"
WGET_URL="${WEB_SITE}files/$TARBALL"
TARBALL_SHA1="b2592490ca7a6c2cd0f069e167a4337c86acdf91"

BUILD_DEPENDS="linux-module-headers libmnl-dev libnftnl-dev"
SPLIT="iptables-dev"

# Rules to configure and make the package.
compile_rules()
{
	# Set the right Kernel path to compile.
	KERNEL_PATH="/usr/src/linux"
	./configure \
		--libexecdir=/usr/lib/iptables \
		$CONFIGURE_ARGS &&
	make && make DESTDIR=$DESTDIR install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	case $PACKAGE in
		iptables)
			copy @std
			DEPENDS="linux-netfilter"
			TAGS="firewall"
			;;
		*-dev)
			copy @dev
			;;
	esac
}
