# SliTaz package receipt v2.

PACKAGE="uhd"
VERSION="3.10.2.0"; FANCY_VERSION="release_003_010_002_000"
CATEGORY="network"
SHORT_DESC="The USRP(tm) Hardware Driver"
MAINTAINER="pascal.bellard@slitaz.org"
LICENSE="GPL2"
WEB_SITE="https://github.com/EttusResearch/uhd"

TARBALL="$PACKAGE-$VERSION.tar.gz"
WGET_URL="$WEB_SITE/archive/$FANCY_VERSION.tar.gz"

BUILD_DEPENDS="cmake python python-mako libboost-dev libboost-date-time \
libboost-filesystem libboost-program-options libboost-regex \
libboost-system libboost-unit-test-framework libboost-serialization \
libboost-thread libboost-math-tr1 libusb-dev eudev-dev"
SPLIT="uhd-dev"

compile_rules() {
	cd $src/host
	mkdir build
	cd build
	cmake \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DENABLE_MANUAL=OFF \
		-DENABLE_DOXYGEN=OFF \
		-DENABLE_MAN_PAGES=OFF \
		-DENABLE_B200=ON \
		-DENABLE_USB=ON \
		.. &&
	make && make install
}

genpkg_rules() {
	case $PACKAGE in
		uhd)
			copy @std
			DEPENDS="libboost-chrono libboost-date-time libboost-filesystem \
			libboost-program-options libboost-regex libboost-serialization \
			libboost-system libboost-thread libboost-unit-test-framework \
			libusb ncurses ncurses-libform python   libboost-math-tr1 eudev"
			;;
		*-dev)
			copy @dev
			DEPENDS="uhd"
			;;
	esac
}
