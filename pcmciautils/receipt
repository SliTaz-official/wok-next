# SliTaz package receipt.

PACKAGE="pcmciautils"
VERSION="018"
CATEGORY="system-tools"
SHORT_DESC="Utilities for inserting and removing PCMCIA cards"
MAINTAINER="pankso@slitaz.org"
LICENSE="GPL2"
WEB_SITE="http://www.kernel.org/pub/linux/utils/kernel/pcmcia/pcmcia.html"

TARBALL="$PACKAGE-$VERSION.tar.xz"
#WGET_URL="http://www.kernel.org/pub/linux/utils/kernel/pcmcia/$TARBALL"
WGET_URL="http://sourceware.mirrors.tds.net/pub/kernel.org/linux/utils/kernel/pcmcia/$TARBALL"

DEPENDS="sysfsutils eudev"
BUILD_DEPENDS="sysfsutils-dev"

# Rules to configure and make the package.
compile_rules()
{
	make

	mkdir -p $install/sbin
	cp -a pccardctl $install/sbin

	mkdir -p $install/lib/udev
	cp -a pcmcia-check-broken-cis pcmcia-socket-startup $install/lib/udev

	mkdir -p $install/etc/udev/rules.d
	cp -a $src/udev/60-pcmcia.rules $install/etc/udev/rules.d

	mkdir -p $install/etc/pcmcia
	cp -a $src/config/config.opts $install/etc/pcmcia

}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	copy etc/ lib/ sbin/
}

post_install()
{
	tazpkg reconfigure eudev --root="$1/" --quiet
}
