# SliTaz package receipt.

PACKAGE="poppler"
VERSION="0.49.0"
CATEGORY="office"
SHORT_DESC="PDF rendering library"
MAINTAINER="pankso@slitaz.org"
LICENSE="GPL2"
WEB_SITE="https://poppler.freedesktop.org/"

TARBALL="$PACKAGE-$VERSION.tar.xz"
WGET_URL="http://poppler.freedesktop.org/$TARBALL"

DEPENDS="cairo fontconfig freetype glib lcms2 libgio libjpeg-turbo libpng tiff \
zlib"
BUILD_DEPENDS="tiff-dev zlib-dev libjpeg-turbo-dev libpng-dev freetype-dev \
fontconfig-dev cairo-dev lcms2-dev"
SPLIT="poppler-apps"

# Rules to configure and make the package.
compile_rules()
{
	./configure \
		--sysconfdir=/etc \
		--disable-static \
		--enable-build-type=release \
		--enable-cmyk \
		--enable-xpdf-headers \
		--with-testdatadir=$PWD/testfiles \
		$CONFIGURE_ARGS &&
	make && make install &&

	docdir="$install/usr/share/doc/poppler-$VERSION" &&
	install -v -m755 -d        $docdir &&
	install -v -m644 README*   $docdir &&
	cp -vr glib/reference/html $docdir
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	cook_copy_files *.so*
}
