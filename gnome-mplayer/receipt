# SliTaz package receipt v2.

PACKAGE="gnome-mplayer"
VERSION="1.0.8"
CATEGORY="multimedia"
SHORT_DESC="GNOME MPlayer is a GTK interface for MPlayer"
MAINTAINER="jozee@slitaz.org"
LICENSE="GPL2"
WEB_SITE="https://code.google.com/archive/p/gnome-mplayer/"

TARBALL="$PACKAGE-$VERSION.tar.gz"
WGET_URL="https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/gnome-mplayer/$TARBALL"

BUILD_DEPENDS="gettext xorg-libX11-dev gtk+3-dev gtk+-dev glib-dev gmtk-dev   \
dbus-dev dbus-glib-dev xorg-libXScrnSaver-dev alsa-lib-dev pulseaudio-dev \
libnotify-dev libgpod-dev"
SPLIT="gnome-mplayer-gtk3:gtk3"

compile_rules() {
	case $SET in
		'')
			SET_ARGS='--disable-gtk3'
			GMTK_LIBS='-lgmtk'
			;;
		gtk3)
			SET_ARGS='--enable-gtk3'
			GMTK_LIBS='-lgmtk3'
			;;
	esac

	GMTK_LIBS="$GMTK_LIBS" \
	./configure \
		--disable-nautilus \
		--without-libmusicbrainz3 \
		$SET_ARGS \
		$CONFIGURE_ARGS &&
	make &&
	make install
}

genpkg_rules() {
	case $PACKAGE in
		gnome-mplayer)
			copy @std
			DEPENDS="alsa-lib dbus dbus-glib gdk-pixbuf glib gmlib gmtk gtk+ \
			libgpod libnotify xorg-libX11 xorg-libXScrnSaver   mplayer"
			CAT="multimedia|with GTK2"
			;;
		gnome-mplayer-gtk3)
			copy @std
			DEPENDS="alsa-lib cairo dbus dbus-glib gdk-pixbuf glib gmlib gmtk3 \
			gtk+3 libgpod libnotify xorg-libX11 xorg-libXScrnSaver   mplayer"
			CAT="multimedia|with GTK3"
			;;
	esac
	TAGS="player audio video movie mp3 ogg dvd"
}
