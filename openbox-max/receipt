# SliTaz package receipt.

PACKAGE="openbox-max"
VERSION="3.6.1"
CATEGORY="x-window"
SHORT_DESC="Small-footprint and standard compliant Window Manager (allow icons in menus + SVG support)"
MAINTAINER="pankso@slitaz.org"
LICENSE="GPL2"
WEB_SITE="http://openbox.org/"

TARBALL="openbox-$VERSION.tar.gz"
WGET_URL="http://openbox.org/dist/openbox/$TARBALL"

BUILD_DEPENDS="glib-dev pango-dev \
gettext xorg-libXcursor-dev xorg-libICE-dev xorg-libSM-dev xorg-libXrandr-dev \
xorg-libXinerama-dev startup-notification-dev automake libtool docbook-utils \
xorg-libXi-dev imlib2-dev librsvg-dev"
SIBLINGS="openbox"

# Rules to configure and make the package.
compile_rules()
{
	# we need reconfiguration after patching...
	autoreconf -fi &&

	./configure \
		--sysconfdir=/etc \
		--libexecdir=/usr/lib/openbox \
		--disable-static \
		--docdir=/usr/share/doc/openbox-$VERSION \
		$CONFIGURE_ARGS &&
	make &&
	make -j1 DESTDIR=$DESTDIR install &&

	# Pipe menu.
	cp $stuff/open-folder-menu.sh $install/usr/lib/openbox/
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	copy obxprop openbox openbox-session *.so* openbox-autostart \
	pixmaps/ Clearlooks/ Onyx*/ xsessions/openbox.desktop open-folder-menu.sh
	# SliTaz /etc/xdg/openbox/* files are in 'slitaz-configs' package
	TAGS="window-manager"
	PROVIDE="openbox openbox-imlib2"
	SUGGESTED="obconf pcmanfm hsetroot"
	DEPENDS="imlib2 librsvg pango startup-notification xorg-libSM \
	xorg-libXcursor xorg-libXi xorg-libXinerama xorg-libXrandr slitaz-configs"
}

#pre_install() {
#	[ ! -d "$1/var/lib/tazpkg/installed/openbox" ] ||
#		tazpkg -r openbox --root="$1/"
#}
