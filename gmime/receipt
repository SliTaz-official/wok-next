# SliTaz package receipt v2.

PACKAGE="gmime"
VERSION="2.6.23"
CATEGORY="development"
SHORT_DESC="Parsing messages using MIME"
MAINTAINER="allan316@gmail.com"
LICENSE="LGPL2.1"
WEB_SITE="http://spruce.sourceforge.net/gmime/"
LFS="http://www.linuxfromscratch.org/blfs/view/stable/general/gmime.html"

TARBALL="$PACKAGE-$VERSION.tar.xz"
WGET_URL="$GNOME_MIRROR/$PACKAGE/${VERSION%.*}/$TARBALL"

BUILD_DEPENDS="gtk-doc zlib-dev glib-dev gpgme-dev gobject-introspection-dev \
vala"
SPLIT="gmime-dev"
COOKOPTS="skip-log-errors"

compile_rules() {
	fix ld
	./configure \
		--disable-static \
		--enable-smime \
		$CONFIGURE_ARGS &&
	fix libtool &&
	make && make install
}

genpkg_rules() {
	case $PACKAGE in
		gmime)
			copy @std
			DEPENDS="glib gpgme zlib"
			;;
		*-dev)
			copy @dev
			DEPENDS="gmime glib-dev gpgme-dev libassuan-dev libffi-dev \
			libgpg-error-dev pcre-dev util-linux-blkid-dev \
			util-linux-mount-dev util-linux-uuid-dev zlib-dev"
			;;
	esac
}
