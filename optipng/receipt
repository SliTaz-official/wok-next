# SliTaz package receipt v2.

PACKAGE="optipng"
VERSION="0.7.6"
CATEGORY="utilities"
SHORT_DESC="Compress and optimize PNG images"
MAINTAINER="devel@slitaz.org"
LICENSE="zlib/libpng"
WEB_SITE="http://optipng.sourceforge.net/"
TAGS="image compression"

TARBALL="$PACKAGE-$VERSION.tar.gz"
WGET_URL="$SF_MIRROR/$PACKAGE/$TARBALL"

BUILD_DEPENDS="libpng16-dev zlib-dev"
SPLIT="$PACKAGE-static:static"

compile_rules() {
	sed -i 's|prefix)/man|prefix)/share/man|' configure

	case "$SET" in
		static)
			LDFLAGS='-static' \
			./configure \
				-prefix=/usr \
				-with-system-libpng
			;;
		*)
			./configure \
				-prefix=/usr \
				-with-system-libpng
			;;
	esac &&

	make &&
	make install
}

genpkg_rules() {
	case $PACKAGE in
		optipng)
			copy @std
			DEPENDS="libpng16 zlib"
			;;
		optipng-static)
			copy @std
			CAT="graphics|static binary"
			PROVIDE="optipng"
			DEPENDS=" "
			;;
	esac
}
