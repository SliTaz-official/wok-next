# SliTaz package receipt v2.

PACKAGE="xarchiver"
VERSION="0.5.4"
CATEGORY="x-window"
SHORT_DESC="A GTK+ lightweight archive manager"
MAINTAINER="erjo@slitaz.org"
LICENSE="GPL2"
WEB_SITE="https://wiki.lxde.org/en/Xarchiver"

TARBALL="$PACKAGE-$VERSION.tar.bz2"
WGET_URL="$SF_MIRROR/xarchiver/$VERSION/$TARBALL"

BUILD_DEPENDS="gtk+-dev intltool"

compile_rules() {
	./configure $CONFIGURE_ARGS && make && make install

	mkdir -p $install/var/www/cgi-bin $install/usr/share/doc/xarchiver/html
	cp $stuff/xarchiver.cgi $install/var/www/cgi-bin
	cp $stuff/index.html    $install/usr/share/doc/xarchiver/html

	sed -i 's|multipart/x-zip;||; /Exec/s/.*/& %f/' \
		$install/usr/share/applications/xarchiver.desktop
}

genpkg_rules() {
	copy @std
	rm -r $fs/usr/share/icons; cook_copy_icons
	DEPENDS="atk cairo fontconfig freetype gdk-pixbuf glib gtk+ pango"
	# binutils for ar; busybox also contains gzip & cpio; rar is get-rar;
	# gtar is absent
	SUGGESTED="arj binutils bzip2 cpio gzip lha lzma lzop p7zip-full rar xz zip"
}
