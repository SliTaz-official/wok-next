# SliTaz package receipt v2.

PACKAGE="subversion"
VERSION="1.9.7"
CATEGORY="development"
SHORT_DESC="Subversion Source Code Management access"
MAINTAINER="lehswe@gmail.com"
LICENSE="Apache"
WEB_SITE="http://subversion.apache.org/"
LFS="http://www.linuxfromscratch.org/blfs/view/stable/general/subversion.html"

TARBALL="$PACKAGE-$VERSION.tar.bz2"
WGET_URL="https://archive.apache.org/dist/subversion/$TARBALL"

BUILD_DEPENDS="apr-dev apr-util-dev serf-dev cyrus-sasl-dev dbus-dev gettext \
libmagic-dev python-dev"
SPLIT="libsvn subversion subversion-dev"

compile_rules() {
	./configure \
		--disable-static \
		--with-apache-libexecdir \
		$CONFIGURE_ARGS &&
	fix libtool &&
	make &&
	make -j1 install || return 1

	cook_pick_docs doc/*
}

genpkg_rules() {
	case $PACKAGE in
		libsvn)
			copy *.so*
			CAT="libdevel|library"
			DEPENDS="apr apr-util expat libmagic libsasl libsqlite3 serf zlib"
			;;
		subversion)
			copy @std @rm
			DEPENDS="apr apr-util libsasl libsvn"
			;;
		*-dev)
			copy @dev
			DEPENDS="libsvn subversion \
			apr-dev apr-util-dev cyrus-sasl-dev expat-dev libmagic-dev \
			serf-dev sqlite3-dev zlib-dev"
			;;
	esac
}

