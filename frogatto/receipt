# SliTaz package receipt v2.

PACKAGE="frogatto"
VERSION="1.3.1"
CATEGORY="games"
SHORT_DESC="Action-adventure game, starring a certain quixotic frog"
MAINTAINER="devel@slitaz.org"
LICENSE="CC-BY-3 custom"
WEB_SITE="https://frogatto.com/"

TARBALL="$PACKAGE-$VERSION.tar.gz"
WGET_URL="https://github.com/frogatto/frogatto/archive/$VERSION.tar.gz"

BUILD_DEPENDS="xorg-libX11-dev libsdl-dev mesa-dev glu-dev glew-dev \
libsdl-image-dev libpng16-dev zlib-dev boost-dev libsdl-ttf-dev \
libsdl-mixer-dev coreutils-file-format ccache"
SPLIT="$PACKAGE-data"

compile_rules() {
	CXXFLAGS="$CXXFLAGS -std=gnu++98" make game server || return 1

	mkdir -p $install/opt/frogatto/
	cp game server *.ttf $install/opt/frogatto/
	cp -r data/ images/ modules/ music/ $install/opt/frogatto
	install -Dm755 $stuff/frogatto $install/usr/bin/frogatto
	install -Dm644 $stuff/frogatto.desktop $install/usr/share/applications/frogatto.desktop
	install -Dm644 $src/images/window-icon.png $install/usr/share/pixmaps/frogatto.png
}

genpkg_rules() {
	case $PACKAGE in
		frogatto)
			copy game server frogatto frogatto.desktop frogatto.png
			DEPENDS="glew boost-iostreams boost-regex boost-system \
			boost-thread glu libpng16 libsdl libsdl-image \
			libsdl-mixer libsdl-ttf mesa xorg-libX11 zlib"
			;;
		frogatto-data)
			copy data/ images/ modules/ music/ *.ttf
			CAT="games|data files"
			;;
	esac
}
