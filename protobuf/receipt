# SliTaz package receipt v2.

PACKAGE="protobuf"
VERSION="3.3.0"
CATEGORY="network"
SHORT_DESC="Protocol Buffers - Google's data interchange format"
MAINTAINER="pankso@slitaz.org"
LICENSE="BSD"
WEB_SITE="https://developers.google.com/protocol-buffers/"

TARBALL="$PACKAGE-$VERSION.tar.gz"
WGET_URL="https://github.com/google/protobuf/archive/v$VERSION.tar.gz"

BUILD_DEPENDS="curl automake libtool zlib-dev python-dev"
SPLIT="protobuf-python protobuf-dev"

# Rules to configure and make the package.
compile_rules()
{
	./autogen.sh &&
	./configure $CONFIGURE_ARGS && make && make install || exit 1

	cd $src/python
	python setup.py install --prefix=/usr --root $DESTDIR
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	case $PACKAGE in
		protobuf)
			copy bin/ *.so*
			DEPENDS="zlib"
			;;
		protobuf-python)
			copy python2.7/
			CAT="network|Python bindings"
			DEPENDS="python protobuf"
			;;
		*-dev) copy @dev;;
	esac
}
