# SliTaz package receipt v2.

PACKAGE="pcmanfm"
VERSION="1.2.5"
CATEGORY="system-tools"
SHORT_DESC="Light and easy to use file manager"
MAINTAINER="pankso@slitaz.org"
LICENSE="GPL2"
WEB_SITE="http://pcmanfm.sourceforge.net/"
HOST_ARCH="i486 arm"

TARBALL="$PACKAGE-$VERSION.tar.xz"
#WGET_URL="$SF_MIRROR/$PACKAGE/files/$TARBALL"
WGET_URL="http://git.lxde.org/gitweb/?p=lxde/pcmanfm.git;a=snapshot;h=$VERSION;sf=txz"

BUILD_DEPENDS_arm="gtk+-dev dbus-glib-dev dbus-dev startup-notification-dev \
libxcb-dev xcb-util-dev libfm-dev menu-cache-dev expat-dev libfm-gtk gtk-doc \
libtool"
BUILD_DEPENDS="intltool xorg-libX11-dev pango-dev libfm-dev gtk+-dev"

# Rules to configure and make the package.
compile_rules()
{
	# http://www.linuxfromscratch.org/blfs/view/stable/lxde/pcmanfm.html
	./configure \
		--sysconfdir=/etc \
		$CONFIGURE_ARGS &&
	make && make install &&

	mkdir -p $install/etc/xdg/pcmanfm/ &&
	# default settings
	cp -r $stuff/default/ $install/etc/xdg/pcmanfm/ &&
	# XDG autostart desktop file (lxsession will use it automatically)
	cp -r $stuff/autostart/ $install/etc/xdg/ &&
	# add custom actions
	mkdir -p $install/usr/share/file-manager &&
	cp -r $stuff/actions/ $install/usr/share/file-manager &&
	install -m755 $stuff/gvfs-mount-archive.sh $install/usr/bin
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	copy @std
	DEPENDS="atk cairo fontconfig freetype gdk-pixbuf glib gtk+ libfm \
	libfm-gtk pango xorg-libX11"
	SUGGESTED="gvfs"
	TAGS="file-manager"
}
