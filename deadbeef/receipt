# SliTaz package receipt v2.

PACKAGE="deadbeef"
VERSION="0.7.2"
CATEGORY="multimedia"
SHORT_DESC="Simple to use GTK+ audio player with systray support"
MAINTAINER="devel@slitaz.org"
LICENSE="GPL2 LGPL2.1"
WEB_SITE="http://deadbeef.sourceforge.net/"

TARBALL="$PACKAGE-$VERSION.tar.bz2"
WGET_URL="$SF_MIRROR/$PACKAGE/$TARBALL"

BUILD_DEPENDS="gettext-dev intltool yasm zlib-dev jansson-dev gtk2-dev \
alsa-lib-dev dbus-dev curl-dev libmad-dev libvorbis-dev libogg-dev flac-dev \
libsndfile-dev libcdio-dev libcddb-dev cdparanoia-III-dev xorg-libX11-dev \
imlib2-dev libjpeg-turbo-dev libpng16-dev libsamplerate-dev faad2-dev "
SPLIT="$PACKAGE-plugins $PACKAGE-dev"

compile_rules() {
	./configure $CONFIGURE_ARGS &&
	fix libtool &&
	make &&
	make install
}

genpkg_rules() {
	case $PACKAGE in
		deadbeef)
			# only limited set of plugins
			copy bin/ applications/ pixmaps/ \
			alsa.so ddb_gui_GTK2.so hotkeys.so m3u.so mms.so mp3.so notify.so \
			supereq.so vorbis.so @ico
			DEPENDS="alsa-lib atk cairo dbus gdk-pixbuf glib gtk2 jansson \
			libmad libvorbis pango xorg-libX11"
			SUGGESTED="deadbeef-plugins"
			TAGS="music audio player mp3 ogg ape"
			;;
		deadbeef-plugins)
			copy @std @rm; rm -r $fs/usr/share
			CAT="multimedia|extra plugins"
			DEPENDS="deadbeef atk cdparanoia-III faad2 flac gdk-pixbuf glib \
			gtk2 imlib2 libcddb libcdio libcurl libogg libsamplerate \
			libsndfile zlib"
			TAGS="music audio player mp3 ogg ape"
			;;
		*-dev)
			copy @dev
			;;
	esac
}
