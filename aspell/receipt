# SliTaz package receipt v2.

PACKAGE="aspell"
VERSION="0.60.6.1"
CATEGORY="system-tools"
SHORT_DESC="GNU spell checker"
MAINTAINER="paul@slitaz.org"
LICENSE="LGPL2"
WEB_SITE="http://aspell.net/"
LFS="http://www.linuxfromscratch.org/blfs/view/svn/general/aspell.html"

TARBALL="$PACKAGE-$VERSION.tar.gz"
WGET_URL="$GNU_MIRROR/aspell/$TARBALL"

BUILD_DEPENDS="perl gettext-dev ncurses-dev"
SPLIT="$PACKAGE-dev"

compile_rules() {
	# fix some problems identified by gcc7:
	sed -i '/ top.do_check ==/s/top.do_check/*&/' modules/filter/tex.cpp
	sed -i '/word ==/s/word/*&/'                  prog/check_funs.cpp

	./configure $CONFIGURE_ARGS &&
	fix libtool &&
	make &&
	make install || return 1

	ln -svfn aspell-0.60 $install/usr/lib/aspell

	cook_pick_docs manual/aspell.html/ manual/aspell-dev.html/
}

genpkg_rules() {
	case $PACKAGE in
		aspell)
			copy @std
			DEPENDS="ncurses"
			TAGS="spell check"
			;;
		*-dev)
			copy @dev
			;;
	esac
}
