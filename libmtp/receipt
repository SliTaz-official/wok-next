# SliTaz package receipt.

PACKAGE="libmtp"
VERSION="1.1.13"
CATEGORY="system-tools"
SHORT_DESC="Access to MTP devices: mp3 players, Android phones"
MAINTAINER="keupont@no-log.org"
LICENSE="LGPL2.1"
WEB_SITE="http://libmtp.sourceforge.net/"

TARBALL="$PACKAGE-$VERSION.tar.gz"
WGET_URL="$SF_MIRROR/$PACKAGE/$TARBALL"

DEPENDS="eudev libgcrypt libgpg-error libusb"
BUILD_DEPENDS="libusb-dev libgcrypt-dev"

# Rules to configure and make the package.
compile_rules()
{
	./configure \
		--with-udev=/etc/udev \
		$CONFIGURE_ARGS &&
	make && make install &&

	# udev rules in /etc/udev/rules.d/; udev execs in /lib/udev/
	mkdir -p $install/lib/udev &&
	mv $install/etc/udev/mtp-probe $install/lib/udev &&
	sed -i 's#/etc/udev/mtp-probe#/lib/udev/mtp-probe#' \
		$install/etc/udev/rules.d/69-libmtp.rules
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	copy udev/ *.so*
}
