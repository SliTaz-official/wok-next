# SliTaz package receipt.

NAME="qca-ossl"
PACKAGE="Qt4-$NAME"
MAJORVERSION="2.0"
VERSION="2.0.0-beta3"
CATEGORY="development"
SHORT_DESC="OpenSSL plug-in for the Qt Cryptographic Architecture (QCA)."
MAINTAINER="ben@seawolfsanctuary.com"
LICENSE="LGPL2.1"
WEB_SITE="http://delta.affinix.com/$NAME"
REPOLOGY="qca-ossl"

TARBALL="$NAME-$VERSION.tar.bz2"
WGET_URL="http://delta.affinix.com/download/qca/$MAJORVERSION/plugins/$TARBALL"

DEPENDS="glibc-locale libQtCore libQtGui libQtNetwork libQtSvg libQtXml \
libQtDesigner libQtScript libQt3Support libQtClucene libQtDBus libQtHelp \
libQtOpenGL libQtSql libQtWebkit qca openssl"
BUILD_DEPENDS="qmake xorg-libX11-dev dbus-dev openssl-dev Qt4-dev qca-dev"

# Rules to configure and make the package.
compile_rules()
{
	chmod +x configure
	./configure \
		--qtdir=/usr/lib/qt && \
	make $MAKEFLAGS && 
	make DESTDIR=$DESTDIR install 2>&1 | grep -v libqca-ossl.so.debug
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	mkdir -p $fs/usr/lib/qt/plugins/crypto
	cp -a $src/lib/* $fs/usr/lib/qt/plugins/crypto/

	# Copy .desktop file:
#	cp -a $stuff/* $fs/usr
}
