# SliTaz package receipt v2.

PACKAGE="xorg-xf86-video-vmware"
VERSION="13.2.1"
CATEGORY="x-window"
SHORT_DESC="Xorg driver for VMware virtual video cards"
MAINTAINER="slaxemulator@gmail.com"
LICENSE="MIT"
WEB_SITE="https://www.x.org/wiki/vmware/"

TARBALL="xf86-video-vmware-$VERSION.tar.bz2"
WGET_URL="$XORG_MIRROR/driver/$TARBALL"

BUILD_DEPENDS="xorg-util-macros xorg-server-dev xorg-libXrandr-dev \
xorg-libXrender-dev xorg-libXinerama-dev xorg-libXv-dev xorg-xproto \
xorg-fontsproto libgcrypt-dev expat-dev eudev-dev"
SPLIT="xorg-xf86-video-vmware-dev"
PKG_RULE="std-dev"

compile_rules() {
	./configure \
		--sysconfdir=/etc \
		--localstatedir=/var \
		$CONFIGURE_ARGS &&
	make &&
	make install
}

genpkg_rules() {
	case $PACKAGE in
		*-vmware)
			copy @std
			DEPENDS="expat libdrm libdrm-nouveau libgcrypt libgpg-error \
			llvm-libs mesa"
			;;
		*-dev)
			copy @dev
			DEPENDS="xorg-xf86-video-vmware expat-dev libdrm-dev libgcrypt-dev \
			libgpg-error-dev llvm-libs mesa-dev"
			;;
	esac
}
