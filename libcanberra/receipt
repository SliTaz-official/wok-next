# SliTaz package receipt v2.

PACKAGE="libcanberra"
VERSION="0.30"
CATEGORY="sound"
SHORT_DESC="Portable sound event library"
MAINTAINER="devl547@gmail.com"
LICENSE="LGPL2.1"
WEB_SITE="http://0pointer.de/lennart/projects/libcanberra/"
LFS="http://www.linuxfromscratch.org/blfs/view/stable/multimedia/libcanberra.html"

TARBALL="$PACKAGE-$VERSION.tar.xz"
WGET_URL="$WEB_SITE/$TARBALL"

BUILD_DEPENDS="libtool gtk+-dev libvorbis-dev alsa-lib-dev eudev-dev \
gstreamer1-dev gtk+3-dev"
SPLIT="libcanberra-gnome libcanberra-gstreamer1 libcanberra-gtk2 \
libcanberra-gtk3 libcanberra libcanberra-dev"

# Rules to configure and make the package.
compile_rules()
{
	./configure \
		--enable-gtk \
		--disable-oss \
		$CONFIGURE_ARGS &&
	make &&
	make -j1 docdir=/usr/share/doc/libcanberra-$VERSION install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	case $PACKAGE in
		*-gnome)
			copy gnome-settings-daemon-3.0/ gdm/ gnome/ canberra-boot
			CAT="gnome|GNOME integration"
			DEPENDS="eudev libcanberra"
			;;
		*-gstreamer1)
			copy libcanberra-gstreamer.so
			CAT="sound|Gstreamer bindings"
			DEPENDS="libcanberra glib gstreamer1 libffi libltdl libogg \
			libvorbis pcre"
			;;
		*-gtk2)
			copy gtk-2.0/modules/*.so libcanberra-gtk.so*
			CAT="sound|GTK+2 integration"
			DEPENDS="libcanberra atk bzlib cairo fontconfig freetype \
			gdk-pixbuf glib gtk+ libffi libharfbuzz libltdl liblzma libogg \
			libpng16 libvorbis libxml2 pango pcre util-linux-blkid \
			util-linux-mount util-linux-uuid xorg-libX11 xorg-libXau \
			xorg-libXdmcp xorg-libXext xorg-libXrender xorg-libxcb xorg-pixman \
			zlib"
			;;
		*-gtk3)
			copy gtk-3.0/modules/*.so libcanberra-gtk3.so* canberra-gtk-play
			CAT="sound|GTK+3 integration"
			DEPENDS="libcanberra atk bzlib cairo fontconfig freetype \
			gdk-pixbuf glib gtk+3 libffi libharfbuzz libltdl liblzma libogg \
			libpng16 libvorbis libxml2 pango pcre util-linux-blkid \
			util-linux-mount util-linux-uuid xorg-libX11 xorg-libXau \
			xorg-libXdmcp xorg-libXext xorg-libXrender xorg-libxcb xorg-pixman \
			zlib"
			;;
		libcanberra)
			copy @std @rm
			DEPENDS="alsa-lib libltdl libogg libvorbis"
			;;
		*-dev)
			copy @dev
			DEPENDS="${SPLIT/$PACKAGE/} \
			alsa-lib-dev atk-dev bzip2-dev cairo-dev fontconfig-dev \
			freetype-dev gdk-pixbuf-dev glib-dev gstreamer1-dev gtk+-dev \
			gtk+3-dev harfbuzz-dev libffi-dev libogg-dev libpng16-dev libtool \
			libvorbis-dev libxml2-dev pango-dev pcre-dev util-linux-blkid-dev \
			util-linux-mount-dev util-linux-uuid-dev xorg-libX11-dev \
			xorg-libXau-dev xorg-libXdmcp-dev xorg-libXext-dev \
			xorg-libXrender-dev xorg-libxcb-dev xorg-pixman-dev xz-dev zlib-dev"
			;;
	esac
}
