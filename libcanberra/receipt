# SliTaz package receipt v2.

PACKAGE="libcanberra"
VERSION="0.30"
CATEGORY="sound"
SHORT_DESC="Portable sound event library"
MAINTAINER="devl547@gmail.com"
LICENSE="LGPL2.1"
WEB_SITE="http://0pointer.de/lennart/projects/libcanberra/"
LFS="http://www.linuxfromscratch.org/blfs/view/svn/multimedia/libcanberra.html"

TARBALL="$PACKAGE-$VERSION.tar.xz"
WGET_URL="$WEB_SITE/$TARBALL"

BUILD_DEPENDS="libtool gtk2-dev libvorbis-dev alsa-lib-dev eudev-dev \
gstreamer1-dev gtk3-dev"
SPLIT="libcanberra-gnome libcanberra-gstreamer1 libcanberra-gtk2 \
libcanberra-gtk3 libcanberra libcanberra-dev"

compile_rules() {
	./configure \
		--enable-gtk \
		--disable-oss \
		$CONFIGURE_ARGS &&
	fix libtool &&
	make &&
	make -j1 docdir=/usr/share/doc/libcanberra-$VERSION install
}

genpkg_rules() {
	case $PACKAGE in
		*-gnome)
			copy gnome-settings-daemon-3.0/ gdm/ gnome/ canberra-boot
			CAT="gnome|GNOME integration"
			DEPENDS="eudev libcanberra"
			;;
		*-gstreamer1)
			copy libcanberra-gstreamer.so
			CAT="sound|Gstreamer bindings"
			DEPENDS="glib gstreamer1 libcanberra"
			;;
		*-gtk2)
			copy gtk-2.0/modules/*.so libcanberra-gtk.so*
			CAT="sound|GTK+2 integration"
			DEPENDS="glib gtk2 libcanberra xorg-libX11"
			;;
		*-gtk3)
			copy gtk-3.0/modules/*.so libcanberra-gtk3.so* canberra-gtk-play
			CAT="sound|GTK+3 integration"
			DEPENDS="glib gtk3 libcanberra xorg-libX11"
			;;
		libcanberra)
			copy @std @rm
			DEPENDS="alsa-lib libltdl libvorbis"
			;;
		*-dev)
			copy @dev
			DEPENDS="${SPLIT/$PACKAGE/} \
			gtk2-dev gtk3-dev xorg-libX11-dev"
			;;
	esac
}
