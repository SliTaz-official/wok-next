# SliTaz package receipt v2.

PACKAGE="c-ares"
VERSION="1.12.0"
CATEGORY="network"
SHORT_DESC="A C library for asynchronous DNS requests"
MAINTAINER="pascal.bellard@slitaz.org"
LICENSE="MIT"
WEB_SITE="https://c-ares.haxx.se/"
LFS="http://www.linuxfromscratch.org/blfs/view/stable/basicnet/c-ares.html"

TARBALL="$PACKAGE-$VERSION.tar.gz"
WGET_URL="https://c-ares.haxx.se/download/$TARBALL"

SPLIT="c-ares-dev"

compile_rules() {
	export CFLAGS=${CFLAGS/-D_GLIBCXX_USE_C99_MATH=1/}
	export CPPFLAGS="$CPPFLAGS -D_GLIBCXX_USE_C99_MATH=1"

	./configure \
		--disable-static \
		$CONFIGURE_ARGS &&
	fix libtool &&
	make &&
	make -j1 DESTDIR=$DESTDIR install
}

genpkg_rules() {
	case $PACKAGE in
		c-ares) copy @std;;
		*-dev)  copy @dev;;
	esac
}
