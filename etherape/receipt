# SliTaz package receipt v2.

PACKAGE="etherape"
VERSION="0.9.14"
CATEGORY="network"
SHORT_DESC="A graphical network monitor and visualization tool"
MAINTAINER="devel@slitaz.org"
LICENSE="GPL2"
WEB_SITE="https://etherape.sourceforge.io/"

TARBALL="$PACKAGE-$VERSION.tar.gz"
WGET_URL="$SF_MIRROR/$PACKAGE/$TARBALL"

BUILD_DEPENDS="gcc glib-dev glibc-dev libglade-dev libgnome-dev gtk2-dev \
libgnomeui-dev libpcap-dev gnome-doc-utils openssl-dev libxslt-dev \
ossp-uuid-dev"

compile_rules() {
	./configure \
		--libdir=/usr/lib \
		--localstatedir=/var/state/$PACKAGE-$VERSION \
		--disable-scrollkeeper \
		$CONFIGURE_ARGS &&
	make &&
	make DESTDIR=$install install || return 1

	# The SliTaz use Tazbox.
	sed -i 's/^Exec=.*/Exec=tazbox su dbus-launch etherape/' \
		$install/usr/share/applications/etherape.desktop

	# TODO: check, looks like ${localstatedir} is a bit weird
}

genpkg_rules() {
	copy @std
	DEPENDS="gtk2 libglade libgnome libpcap libgnomeui libltdl \
	openssl libxslt libgnome-keyring util-linux-uuid"
	TAGS="ip monitoring network tcp vlan wlan"
}
