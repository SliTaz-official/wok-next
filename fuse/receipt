# SliTaz package receipt v2.

PACKAGE="fuse"
VERSION="2.9.7"
CATEGORY="system-tools"
SHORT_DESC="Fuse Filsystem in user space"
MAINTAINER="pankso@slitaz.org"
LICENSE="GPL2"
WEB_SITE="http://fuse.sourceforge.net/"
HOST_ARCH="i486 arm"

TARBALL="$PACKAGE-$VERSION.tar.gz"
WGET_URL="https://github.com/libfuse/libfuse/releases/download/fuse-$VERSION/$TARBALL"

SPLIT="fuse-dev"

# Rules to configure and make the package.
compile_rules()
{
	# http://www.linuxfromscratch.org/blfs/view/stable/postlfs/fuse.html
	./configure \
		--disable-static \
		INIT_D_PATH=/tmp/init.d \
		$CONFIGURE_ARGS &&
	make &&
	make install &&

	mkdir -p $install/lib &&
	mv -v $install/usr/lib/libfuse.so.* $install/lib &&
	ln -sfv ../../lib/libfuse.so.$VERSION $install/usr/lib/libfuse.so &&
	rm -rf $install/tmp/init.d &&
	mkdir -p $install/usr/share/doc/fuse-$VERSION &&
	install -v -m644 doc/how-fuse-works doc/kernel.txt \
		$install/usr/share/doc/fuse-$VERSION &&

	mkdir -p $install/etc &&
	cp $stuff/fuse.conf $install/etc
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	case $PACKAGE in
		fuse)
			copy @std
			CONFIG_FILES="/etc/fuse.conf"
			TAGS="filesystem"
			;;
		*-dev)
			copy @dev
			;;
	esac
}
