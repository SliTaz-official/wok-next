# SliTaz package receipt v2.

PACKAGE="octave"
VERSION="4.0.0"
CATEGORY="development"
SHORT_DESC="Language for numerical computations"
MAINTAINER="pascal.bellard@slitaz.org"
LICENSE="GPL3"
WEB_SITE="http://www.gnu.org/software/octave/"

TARBALL="$PACKAGE-$VERSION.tar.xz"
WGET_URL="ftp://ftp.gnu.org/gnu/$PACKAGE/$TARBALL"

BUILD_DEPENDS="gfortran zlib-dev ncurses-dev readline-dev freetype-dev xorg-dev \
fltk-dev perl texinfo lapack tar gawk pcre-dev mesa-dev curl-dev \
libdrm-dev expat-dev libxml2-dev libgfortran zlib ncurses readline freetype \
gcc-lib-base expat mesa glu xorg-libX11 xorg-libXext xorg-libXxf86vm \
xorg-libXdamage xorg-libXfixes libdrm xorg-libXau xorg-libXdmcp pcre libcurl \
lapack bash gcc fltk gnuplot"

compile_rules() {
	# http://www.nabble.com/Random-rounding-errors-td16010966.html
	FFLAGS="-O -ffloat-store" \
	./configure \
		--prefix=/usr \
		--infodir=/usr/share/info \
		--libexecdir=/usr/lib/$PACKAGE \
		--mandir=/usr/share/man \
		--enable-shared \
		--disable-static \
		--disable-docs \
		$CONFIGURE_ARGS &&
	LANG=C make $MAKEFLAGS &&
	make DESTDIR=$install install
}

genpkg_rules() {
	cp -a $install/* $fs
	DEPENDS="libgfortran zlib ncurses readline freetype gcc-lib-base expat \
	mesa glu xorg-libX11 xorg-libXext xorg-libXxf86vm xorg-libXdamage \
	xorg-libXfixes libdrm xorg-libXau xorg-libXdmcp pcre libcurl lapack bash \
	gcc fltk gnuplot"
	TAGS="programming language"
}
