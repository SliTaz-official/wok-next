# SliTaz package receipt v2.

PACKAGE="neon"
VERSION="0.30.2"
CATEGORY="development"
SHORT_DESC="Neon HTTP and WebDAV client library"
MAINTAINER="lehswe@gmail.com"
LICENSE="GPL2"
WEB_SITE="http://www.webdav.org/neon"

TARBALL="$PACKAGE-$VERSION.tar.gz"
WGET_URL="http://www.webdav.org/neon/$TARBALL"

BUILD_DEPENDS="zlib-dev openssl-dev libxml2-dev"
SPLIT="neon-dev"

# Rules to configure and make the package.
compile_rules()
{
	# http://www.linuxfromscratch.org/blfs/view/stable/basicnet/neon.html
	sed -i 's|client_set|set|; s|gnutls_retr|&2|; s|type = t|cert_&|' \
		src/ne_gnutls.c

	./configure \
		--with-ssl \
		--enable-shared \
		--disable-static \
	$CONFIGURE_ARGS &&
	make &&
	make install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	case $PACKAGE in
		neon)
			copy @std
			TAGS="http webdav"
			DEPENDS="openssl liblzma libxml2 zlib"
			;;
		*-dev)
			copy @dev
			DEPENDS="neon libxml2-dev openssl-dev xz-dev zlib-dev"
			;;
	esac
}


