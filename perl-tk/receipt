# SliTaz package receipt v2.

PACKAGE="perl-tk"
VERSION="804.034"
CATEGORY="perl"
SHORT_DESC="Tk - a graphical user interface toolkit for Perl"
MAINTAINER="sygne@ombres.eu"
LICENSE="GPL"
WEB_SITE="https://metacpan.org/release/Tk"

TARBALL="Tk-$VERSION.tar.gz"
WGET_URL="https://cpan.metacpan.org/authors/id/S/SR/SREZIC/$TARBALL"

BUILD_DEPENDS="perl-dev xorg-libX11-dev freetype-dev xorg-libXft-dev \
fontconfig-dev libpng16-dev zlib-dev libjpeg-turbo-dev tk-dev"
SPLIT="perl-tk-dev"

# Rules to configure and make the package.
compile_rules()
{
	# The Xlib header is wrong...
	sed -i 's/XKeycodeToKeysym\(.*\)unsigned int/XKeycodeToKeysym\1KeyCode/' \
		pTk/Xlib.h

	perl Makefile.PL &&
	make DESTDIR=$install install &&

	chmod -R u+w $install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	case $PACKAGE in
		perl-tk)
			copy @std
			DEPENDS="perl fontconfig libjpeg-turbo libpng16 xorg-libX11 \
			xorg-libXft zlib tk"
			;;
		*-dev)
			copy @dev
			;;
	esac
}
