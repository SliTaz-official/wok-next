# SliTaz package receipt.

PACKAGE="coreutils-file-special"
VERSION="8.25"
CATEGORY="system-tools"
SHORT_DESC="GNU utilities that work with special file types."
MAINTAINER="rcx@zoominternet.net"
LICENSE="GPL3"
WEB_SITE="https://www.gnu.org/software/coreutils/coreutils.html"

WANTED="coreutils"
DEPENDS="glibc-base"

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	cook_copy_files ln mkdir mknod rmdir link mkfifo mktemp readlink realpath \
		unlink
}

post_install()
{
	# Remove Busybox applets in order to not clash with ("/bin", "/sbin",
	# "/usr/bin" and "/usr/sbin" conflicts with the same filename)
	rm "$1/bin/mktemp"   # for /usr/bin/mktemp
}

post_remove()
{
	# Restore all Busybox applets that have been replaced
	while read i; do
		busybox ln -s /bin/busybox "$1$i"
	done <<EOT
/bin/ln
/bin/mkdir
/bin/mknod
/bin/mktemp
/bin/rmdir
/usr/bin/mkfifo
/usr/bin/realpath
EOT
}
