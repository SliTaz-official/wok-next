# SliTaz package receipt v2.

PACKAGE="libvpx"
VERSION="1.6.1"
CATEGORY="multimedia"
SHORT_DESC="The VP8 Codec SDK"
MAINTAINER="slaxemulator@gmail.com"
LICENSE="BSD"
WEB_SITE="http://www.webmproject.org/"

TARBALL="$PACKAGE-$VERSION.tar.bz2"
WGET_URL="http://storage.googleapis.com/downloads.webmproject.org/releases/webm/$TARBALL"

BUILD_DEPENDS="perl coreutils-file-output-full yasm"
SPLIT="libvpx-dev"

# Rules to configure and make the package.
compile_rules()
{
	# http://www.linuxfromscratch.org/blfs/view/stable/multimedia/libvpx.html
	sed -i 's/cp -p/cp/' build/make/Makefile &&

	mkdir libvpx-build &&
	cd    libvpx-build &&

	../configure \
		--prefix=/usr \
		--enable-runtime-cpu-detect \
		--enable-shared \
		--disable-static \
		&&
	make && make install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	case $PACKAGE in
		libvpx) copy @std;;
		*-dev)  copy @dev;;
	esac
}
