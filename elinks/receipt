# SliTaz package receipt v2.

PACKAGE="elinks"
VERSION="0.12pre6"
CATEGORY="network"
SHORT_DESC="Full featured www text browser"
MAINTAINER="allan316@gmail.com"
LICENSE="GPL2"
WEB_SITE="http://elinks.or.cz"

TARBALL="$PACKAGE-$VERSION.tar.bz2"
WGET_URL="$WEB_SITE/download/$TARBALL"

BUILD_DEPENDS="openssl10-dev bzip2-dev spidermonkey-dev zlib-dev libidn-dev \
expat-dev gpm-dev gettext"

compile_rules() {
	export CPPFLAGS="$CPPFLAGS -I/usr/include/openssl-1.0"
	export LDFLAGS="$LDFLAGS -L/usr/lib/openssl-1.0"

	# --enable-fastmem: disables internal `malloc()` debugging and 
	# use `alloca()` wherever possible.
	# --disable-backtrace disables internal backtrace code.
	./configure \
		--enable-fastmem \
		--disable-backtrace \
		--without-x \
		--with-openssl \
		--enable-88-colors \
		$CONFIGURE_ARGS &&
	make &&
	make DESTDIR=$DESTDIR install
}

genpkg_rules() {
	copy @std
	DEPENDS="bzlib expat libidn openssl10 spidermonkey zlib"
	TAGS="web-browser"
}
