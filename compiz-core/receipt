# SliTaz package receipt v2.

PACKAGE="compiz-core"
VERSION="0.8.12.3"
CATEGORY="x-window"
SHORT_DESC="OpenGL compositing manager for 3D effect"
MAINTAINER="devel@slitaz.org"
LICENSE="MIT GPL LGPL"
WEB_SITE="https://github.com/compiz-reloaded"
REPOLOGY="compiz"

TARBALL="$PACKAGE-$VERSION.tar.xz"
WGET_URL="$WEB_SITE/compiz/releases/download/v$VERSION/compiz-$VERSION.tar.xz"

BUILD_DEPENDS="xorg-dev intltool librsvg-dev libxslt-dev pango-dev libtool \
startup-notification-dev mesa-dev file dbus-dev dbus-glib-dev cairo-dev \
util-linux-uuid-dev expat-dev xorg-libxshmfence-dev glu-dev \
xorg-xcb-util-dev libjpeg-turbo-dev"
SPLIT="$PACKAGE-dev"

compile_rules() {
	./configure \
		--enable-shared \
		--enable-librsvg \
		--enable-dbus \
		--enable-dbus-glib \
		--enable-glib \
		--disable-static \
		--disable-inotify &&
	fix libtool &&
	make &&
	make install || return 1

	sed 's|bash|sh|' -i $install/usr/bin/compiz-decorator
}

genpkg_rules() {
	case $PACKAGE in
		compiz-core)
			copy @std
			DEPENDS="librsvg libxslt mesa glu dbus dbus-glib \
			startup-notification compiz-bcop compiz-libcompizconfig"
			;;
		*-dev)
			copy @dev
			;;
	esac
}
