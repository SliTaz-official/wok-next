# SliTaz package receipt v2.

PACKAGE="libgnome"
VERSION="2.30.0"
CATEGORY="x-window"
SHORT_DESC="GNOME Library"
MAINTAINER="pankso@slitaz.org"
LICENSE="GPL2"
WEB_SITE="http://www.gnome.org"

TARBALL="$PACKAGE-$VERSION.tar.bz2"
WGET_URL="$GNOME_MIRROR/$PACKAGE/${VERSION%.*}/$TARBALL"

BUILD_DEPENDS="libbonobo-dev gnome-vfs-dev esound-dev audiofile-dev \
GConf-dev popt-dev alsa-lib-dev dbus-glib-dev intltool libffi libxml2-dev \
gnutls-dev libgcrypt-dev"
SPLIT="libgnome-dev"

compile_rules() {
	sed -i 's/-DG_DISABLE_DEPRECATED//' libgnome/Makefile*

	./configure \
		--sysconfdir=/etc/gnome \
		--localstatedir=/var/lib \
		$CONFIGURE_ARGS &&
	fix libtool &&
	make &&
	make install || return 1

	mkdir -p $install/usr/share/images
	ln -s ../pixmaps/backgrounds/gnome/background-default.jpg \
		$install/usr/share/images/gnome-default.jpg
}

genpkg_rules() {
	case $PACKAGE in
		libgnome)
			copy @std
			DEPENDS="GConf audiofile esound glib gnome-vfs libbonobo orbit2 \
			popt"
			;;
		*-dev)
			copy @dev
			DEPENDS="libgnome GConf-dev esound-dev glib-dev gnome-vfs-dev \
			libbonobo-dev orbit2-dev popt-dev"
			;;
	esac
}
