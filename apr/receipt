# SliTaz package receipt v2.

PACKAGE="apr"
VERSION="1.6.5"
CATEGORY="misc"
SHORT_DESC="Apache Portable Runtime Library"
MAINTAINER="devel@slitaz.org"
LICENSE="Apache"
WEB_SITE="http://apr.apache.org/"
LFS="http://www.linuxfromscratch.org/blfs/view/svn/general/apr.html"

TARBALL="$PACKAGE-$VERSION.tar.bz2"
WGET_URL="https://archive.apache.org/dist/apr/$TARBALL"
TARBALL_SHA1="6fdedcd21de9da806d0a01769b8be7ba0c495145"

BUILD_DEPENDS="util-linux-uuid-dev"
SPLIT="$PACKAGE-dev"

COOKOPTS="skip-log-errors force-arch" # different apr-1-config, .h, .pc, .mk, libtool

COPY_std="*.so*"
COPY_dev="@dev build/ *.exp"

DEPENDS_std="util-linux-uuid"
DEPENDS_dev="$PACKAGE util-linux-uuid-dev"

compile_rules() {
	# should define prefix
	./configure \
		--prefix=/usr \
		--disable-static \
		--with-installbuilddir=/usr/share/apr-1/build \
		--enable-nonportable-atomics \
		--with-devrandom \
		$CONFIGURE_ARGS &&
	fix libtool &&
	make &&
	make install
}
