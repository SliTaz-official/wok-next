# SliTaz package receipt v2.

PACKAGE="apr"
VERSION="1.6.2"
CATEGORY="misc"
SHORT_DESC="Apache Portable Runtime Library"
MAINTAINER="lehswe@gmail.com"
LICENSE="Apache"
WEB_SITE="http://apr.apache.org/"
LFS="http://www.linuxfromscratch.org/blfs/view/stable/general/apr.html"

TARBALL="$PACKAGE-$VERSION.tar.bz2"
WGET_URL="https://archive.apache.org/dist/apr/$TARBALL"

BUILD_DEPENDS="util-linux-uuid-dev"
SPLIT="apr-dev"

COOKOPTS="skip-log-errors"
CROSS="error: cannot check for file existence when cross compiling"

compile_rules() {
	./configure \
		--disable-static \
		--with-installbuilddir=/usr/share/apr-1/build \
		--enable-nonportable-atomics \
		--with-devrandom \
		$CONFIGURE_ARGS &&
	fix libtool &&
	make &&
	make install
}

genpkg_rules() {
	case $PACKAGE in
		apr)
			copy *.so* *.exp
			DEPENDS="util-linux-uuid"
			;;
		apr-dev)
			copy @dev build/
			DEPENDS="apr util-linux-uuid-dev"
			;;
	esac
}
