# SliTaz package receipt v2.

PACKAGE="astromenace"
VERSION="1.3.2"
CATEGORY="games"
SHORT_DESC="Hardcore 3D space shooter with spaceship upgrade possibilities"
MAINTAINER="hackdorte@sapo.pt"
LICENSE="GPL3"
WEB_SITE="https://www.viewizard.com/"

TARBALL="$PACKAGE-src-$VERSION.tar.bz2"
WGET_URL="$SF_MIRROR/openastromenace/$TARBALL"

BUILD_DEPENDS="gcc cmake make libsdl-dev libogg-dev libvorbis-dev glu-dev \
openal-dev freealut-dev xorg-libXinerama-dev freetype-dev mesa-dev \
fontconfig-dev"

compile_rules() {
	cmake . &&
	make &&
	./AstroMenace --pack --rawdata=./RAW_VFS_DATA || return 1

	chmod +x AstroMenace

	mkdir -p $install/usr/games/AstroMenace/
	cp AstroMenace astromenace_64.png astromenace_128.png ChangeLog.txt \
	gamedata.vfs gpl-3.0.txt $install/usr/games/AstroMenace/

	mkdir -p $install/usr/share/pixmaps/
	cp astromenace_64.png $install/usr/share/pixmaps/astromenace.png
}

genpkg_rules() {
	copy @std
	TAGS="arcade game shooting space"
	DEPENDS="freealut freetype glu libsdl libvorbis mesa openal xorg-libX11 \
	xorg-libXinerama"
}
