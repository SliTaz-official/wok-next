# SliTaz package receipt v2.

PACKAGE="libjpeg-turbo"
VERSION="2.0.0"
CATEGORY="graphics"
SHORT_DESC="Accelerated JPEG image codec"
MAINTAINER="pascal.bellard@slitaz.org"
LICENSE="MIT"
WEB_SITE="https://libjpeg-turbo.org/"
LFS="http://www.linuxfromscratch.org/blfs/view/svn/general/libjpeg.html"
HOST_ARCH="i486 x86_64"

TARBALL="$PACKAGE-$VERSION.tar.gz"
WGET_URL="$SF_MIRROR/$PACKAGE/$TARBALL"

BUILD_DEPENDS="cmake nasm"
SPLIT="jpeg-turbo libjpeg-turbo-dev"

compile_rules() {
	mkdir build
	cd    build
	cmake \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_INSTALL_LIBDIR=/usr/lib \
		-DENABLE_STATIC=FALSE \
		-DWITH_JPEG8=TRUE \
		.. &&
	make &&
	make install
}

genpkg_rules() {
	case $PACKAGE in
		libjpeg-turbo)
			copy *.so*
			TAGS="jpeg jpg"
			PROVIDE="libjpeg"
			;;
		jpeg-turbo)
			copy bin/
			DEPENDS="libjpeg-turbo"
			CAT="x-window|programs"
			TAGS="jpeg jpg"
			;;
		*-dev) copy @dev;;
	esac
}
