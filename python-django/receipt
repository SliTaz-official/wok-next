# SliTaz package receipt v2.

PACKAGE="python-django"
VERSION="latest"
CATEGORY="development"
SHORT_DESC="High-level Python Web framework"
MAINTAINER="al.bobylev@gmail.com"
LICENSE="BSD"
WEB_SITE="https://pypi.org/project/Django/"
REPOLOGY="python:django"

BUILD_DEPENDS="python python-pytz python3 python3-pytz"
SPLIT="python3-django:py3"

compile_rules() {
	case $SET in
		'')  pip='pip';;
		py3) pip='pip3';;
	esac

	$pip install --no-compile --root=$DESTDIR Django &&

	sed -i 's|fill="ABABA7"|fill="#ABABA7"|' \
		$install/usr/lib/python*/site-packages/django/contrib/gis/static/gis/img/draw_polygon_off.svg
}

genpkg_rules() {
	VERSION=$(find $install -type d -name 'Django-*.dist-info' -exec basename '{}' \; \
	| sed 's|Django-\(.*\)\.dist-info|\1|')
	copy @std
	case $PACKAGE in
		python-django)  DEPENDS="python python-pytz";;
		python3-django) DEPENDS="python3 python3-pytz";;
	esac
}
