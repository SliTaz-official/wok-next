# SliTaz package receipt v2.

PACKAGE="alsa-tools"
VERSION="1.0.26.1"
CATEGORY="meta"
SHORT_DESC="Alsa sound system additionnal tools (meta package)."
MAINTAINER="pankso@slitaz.org"
LICENSE="GPL2"
WEB_SITE="http://www.alsa-project.org/"
TARBALL="$PACKAGE-$VERSION.tar.bz2"
WGET_URL="http://alsa.cybermirror.org/tools/$TARBALL"
GENERIC_MENUS="no"

# We don't want all card mixer as dep.
DEPENDS="alsa-lib alsa-tools-ac3dec"
BUILD_DEPENDS="alsa-lib-dev gtk+-dev fltk-dev autoconf automake"
SPLIT="alsa-tools-ac3dec alsa-tools-echomixer alsa-tools-envy24control \
alsa-tools-hdsp alsa-tools-hwmixvolume alsa-tools-rmedigicontrol"

# List of tools we want to build, then splited into individual packages
TOOLS="ac3dec envy24control hwmixvolume hdsploader hdspconf hdspmixer \
rmedigicontrol echomixer"

# Rules to configure and make the package.
compile_rules()
{
	for tool in $TOOLS; do
		cd $src/$tool
		./configure $CONFIGURE_ARGS
		make && make DESTDIR=$DESTDIR install
	done
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	case $PACKAGE in
	alsa-tools-ac3dec)
		CAT="multimedia|A free AC-3 stream decoder."
		DEPENDS="alsa-lib"
		mkdir -p $fs/usr/bin
		cp -a $install/usr/bin/ac3dec $fs/usr/bin
		cp -a $install/usr/bin/extract_ac3 $fs/usr/bin
		;;
	alsa-tools-echomixer)
		CAT="multimedia|Control all the features of any Echoaudio soundcard."
		DEPENDS="alsa-lib gtk+"
		mkdir -p $fs/usr/bin
		cp -a $install/usr/bin/echomixer $fs/usr/bin
		;;
	alsa-tools-envy24control)
		CAT="multimedia|Control tool for Envy24 (ice1712) based soundcards."
		DEPENDS="alsa-lib gtk+"
		mkdir -p $fs/usr/bin
		cp -a $install/usr/bin/envy24control $fs/usr/bin
		;;
	alsa-tools-hdsp)
		CAT="multimedia|RME Hammerfall DSP cards firmware loader, mixer and config tool."
		DEPENDS="alsa-lib fltk"
		mkdir -p $fs/usr/bin $fs/usr/share/applications $fs/usr/share/pixmaps
		cp -a $install/usr/bin/hdsp* $fs/usr/bin
		cp -a $install/usr/share/applications/hdsp*.desktop \
			$fs/usr/share/applications
		cp -a $install/usr/share/pixmaps/hdsp*.png \
			$fs/usr/share/pixmaps
		;;
	alsa-tools-hwmixvolume)
		CAT="multimedia|Control the volume of sound cards using hardware mixing."
		DEPENDS="alsa-lib python pygtk"
		mkdir -p $fs/usr/bin
		cp -a $install/usr/bin/hwmixvolume $fs/usr/bin
		;;
	alsa-tools-rmedigicontrol)
		CAT="multimedia|Control tool for RME Digi32 and RME Digi96 soundcards."
		DEPENDS="alsa-lib gtk+"
		mkdir -p $fs/usr/bin
		cp -a $install/usr/bin/rmedigicontrol $fs/usr/bin
		;;
	esac
}
