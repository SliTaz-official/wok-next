# SliTaz package receipt v2.

PACKAGE="mc"
VERSION="4.8.21"
CATEGORY="system-tools"
SHORT_DESC="Midnight Commander - ncurses based file manager"
MAINTAINER="erjo@slitaz.org"
LICENSE="GPL3"
WEB_SITE="http://midnight-commander.org/"
LFS="http://www.linuxfromscratch.org/blfs/view/svn/general/mc.html"

TARBALL="$PACKAGE-$VERSION.tar.xz"
WGET_URL="http://ftp.midnight-commander.org/$TARBALL"

BUILD_DEPENDS="check-dev glib-dev gettext gpm-dev libssh2-dev"
SPLIT="mc-noarch"

COOKOPTS="!menus"

compile_rules() {
	./configure \
		--enable-charset \
		--with-gpm-mouse \
		--with-screen=ncurses \
		$CONFIGURE_ARGS &&
	fix libtool &&
	make &&
	make install || return 1

	install -Dm644 /usr/share/terminfo/s/screen-256color \
	       $install/usr/share/terminfo/s/screen-256color

	install -Dm644 $stuff/mc.desktop      $install/usr/share/applications/mc.desktop
	install -Dm644 $stuff/mc-root.desktop $install/usr/share/applications/mc-root.desktop
	install -Dm755 $stuff/mc.sh           $install/usr/bin/mc.sh
}

genpkg_rules() {
	case $PACKAGE in
		mc)
			copy mc mcdiff mcedit mcview cons.saver
			DEPENDS="glib libssh2 ncurses"
			SUGGESTED="perl python openssl gpm xz cdrkit-isoinfo lynx w3m wv \
			poppler-apps file"
			TAGS="file-manager text-editor"
			;;
		mc-noarch)
			copy @std @rm
			CAT="system-tools|common files"
			;;
	esac
}
