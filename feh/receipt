# SliTaz package receipt v2.

PACKAGE="feh"
VERSION="2.10"
CATEGORY="graphics"
SHORT_DESC="Lightweight and powerful image viewer and composer"
MAINTAINER="devel@slitaz.org"
LICENSE="MIT"
WEB_SITE="https://feh.finalrewind.org/"

TARBALL="$PACKAGE-$VERSION.tar.bz2"
WGET_URL="https://feh.finalrewind.org/$TARBALL"

BUILD_DEPENDS="imlib2-dev giblib-dev xorg-xorgproto \
xorg-libX11-dev libpng16-dev jpeg-dev curl-dev xorg-libXinerama-dev \
xorg-libXt-dev"

compile_rules() {
	sed -i 's|/usr/local|/usr|g' config.mk

	make &&
	make DESTDIR=$install install || return 1

	# Fix path to icon and remove from menu since it need a param to
	# load images.
	sed \
		-e 's|/home/slitaz/wok/feh/install||' \
		-e '/Categories.*/d' \
		-i $install/usr/share/applications/feh.desktop
}

genpkg_rules() {
	copy @std
	DEPENDS="imlib2 giblib jpeg libpng16 xorg-libX11 freetype xorg-libXau \
	xorg-libXdmcp xorg-libXext xorg-libXinerama libcurl"
	TAGS="image photo viewer"
}
