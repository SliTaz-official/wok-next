# SliTaz package receipt v2.

PACKAGE="nbs"
VERSION="2007svn"
CATEGORY="network"
SHORT_DESC="Network Broadcast Sound"
MAINTAINER="pascal.bellard@slitaz.org"
LICENSE="GPL2"
WEB_SITE="http://svn.digium.com/view/nbs"

TARBALL="$PACKAGE-$VERSION.tar.bz2"
WGET_URL="subversion|http://svn.digium.com/svn/nbs/trunk"

BUILD_DEPENDS="subversion"
SPLIT="nbs-dev"

compile_rules() {
	# respect DESTDIR
	sed -i.orig 's|/usr/|\$(DESTDIR)/usr/|g' Makefile
	mkdir -p $install/usr/bin/

	make &&
	make DESTDIR=$DESTDIR install || return 1

	ln -s libnbs.so.1.0 $install/usr/lib/libnbs.so.1

	# like --disable static (asterisk don't like this lib)
	find $install -type f -name '*.a' -delete
}

genpkg_rules() {
	case $PACKAGE in
		nbs)   copy @std;;
		*-dev) copy @dev;;
	esac
}
