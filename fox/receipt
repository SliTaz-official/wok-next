# SliTaz package receipt v2.

PACKAGE="fox"
VERSION="1.6.49"
CATEGORY="x-window"
SHORT_DESC="Fox toolkit"
MAINTAINER="pankso@slitaz.org"
LICENSE="LGPL2.1"
WEB_SITE="http://www.fox-toolkit.org/"

TARBALL="$PACKAGE-$VERSION.tar.gz"
WGET_URL="http://ftp.fox-toolkit.org/pub/$TARBALL"

BUILD_DEPENDS_arm="jpeg-dev libpng16-dev tiff-dev xorg-libXft-dev"
BUILD_DEPENDS="libpng16-dev jpeg-dev tiff-dev xorg-libXft-dev mesa-dev \
glu-dev freetype-dev fontconfig-dev expat-dev libxml2-dev xorg-dev \
xorg-libxshmfence-dev"
SPLIT="adie calculator fox-dev fox-doc pathfinder shutterbug"

compile_rules() {
	case "$ARCH" in
		arm) ARCH_ARGS="--with-opengl=no";;
	esac

	./configure \
		--with-xft \
		$CONFIGURE_ARGS $ARCH_ARGS &&
	fix libtool &&
	make $MAKEFLAGS &&
	make DESTDIR=$DESTDIR install
}

testsuite() {
	readelf -h $install/usr/bin/adie || exit 1
}

genpkg_rules() {
	case $PACKAGE in
		fox)
			copy libCHART-*.so* libFOX-*.so*
			SUGGESTED="adie calculator pathfinder shutterbug"
			DEPENDS="libpng16 jpeg tiff xorg-libXft bzlib mesa glu \
			xorg-libXcursor xorg-libXrandr xorg-libXxf86vm \
			xorg-libXdamage libdrm jbigkit"
			;;
		adie)
			copy adie Adie.stx
			CAT="x-window|advanced text editor"
			TAGS="text-editor"
			DEPENDS="fox"
			;;
		calculator)
			copy calculator
			CAT="utilities|calculator"
			TAGS="calculator"
			DEPENDS="fox"
			;;
		fox-dev)
			copy @dev reswrap
			DEPENDS="fox"
			;;
		fox-doc)
			copy doc/
			CAT="misc|documentation"
			;;
		pathfinder)
			copy PathFinder
			CAT="x-window|fast and light file manager"
			TAGS="file-manager"
			DEPENDS="fox"
			;;
		shutterbug)
			copy shutterbug
			CAT="x-window|screenshot application"
			DEPENDS="fox"
			;;
	esac
}
