# SliTaz package receipt v2.

PACKAGE="clisp"
VERSION="2.50"
CATEGORY="development"
SHORT_DESC="GNU ANSI Common Lisp implementation"
MAINTAINER="paul@slitaz.org"
LICENSE="GPL2"
WEB_SITE="https://clisp.sourceforge.io/"

TARBALL="$PACKAGE-$VERSION.tar.bz2"
WGET_URL="https://gitlab.com/gnu-clisp/clisp/-/archive/clisp-$VERSION/clisp-clisp-$VERSION.tar.bz2"

BUILD_DEPENDS="libunistring-dev gettext-dev libffcall readline-dev libsigsegv-dev"

compile_rules() {
	FORCE_UNSAFE_CONFIGURE=1 \
	./configure \
		--with-ffcall \
		--with-readline \
		build &&
	cd  build &&
	./makemake \
		--with-ffcall \
		--with-readline \
		--with-dynamic-ffi \
		> Makefile &&
	make &&
	make DESTDIR=$install install
}

genpkg_rules() {
	copy @std @dev
	DEPENDS="libsigsegv libunistring ncurses readline"
}
