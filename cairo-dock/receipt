# SliTaz package receipt v2.

PACKAGE="cairo-dock"
VERSION="3.3.2"
CATEGORY="x-window"
SHORT_DESC="Cairo-Dock is a light and eye-candy dock to launch"
MAINTAINER="pankso@slitaz.org"
LICENSE="GPL3"
WEB_SITE="http://www.glx-dock.org/"

TARBALL="$PACKAGE-$VERSION.tar.gz"
WGET_URL="https://github.com/Cairo-Dock/cairo-dock-core/archive/$VERSION.tar.gz"

BUILD_DEPENDS="gtk+ cairo librsvg xorg-xcompmgr mesa gtkglext dbus libcurl \
cmake gtk+-dev cairo-dev librsvg-dev mesa-dev \
gtkglext-dev dbus-dev dbus-glib-dev curl-dev libcroco wget libxml2-dev \
xorg-libXtst-dev xorg-libXcomposite-dev glu-dev gettext-tools"
SPLIT="cairo-dock cairo-dock-dev"

compile_rules() {
	mkdir build
	cd    build
	cmake \
		-DCMAKE_INSTALL_PREFIX=/usr \
		.. &&
	make &&
	make DESTDIR=$DESTDIR install
}

genpkg_rules() {
	case $PACKAGE in
		cairo-dock)
			copy @std
			DEPENDS="cairo dbus-glib gdk-pixbuf glib glu gtk+ libcurl librsvg \
			libxml2 mesa pango" # xorg-xcompmgr gtkglext dbus
			SUGGESTED="cairo-dock-plugins"
			;;
		*-dev)
			copy @dev
			DEPENDS="cairo-dock \
			cairo-dev curl-dev dbus-dev dbus-glib-dev glib-dev glu-dev \
			gtk+-dev librsvg-dev libxml2-dev mesa-dev xorg-libX11-dev"
			;;
	esac
}
