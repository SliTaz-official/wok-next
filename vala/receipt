# SliTaz package receipt v2.

PACKAGE="vala"
VERSION="0.40.3"
CATEGORY="development"
SHORT_DESC="Compiler for the GObject type system"
MAINTAINER="devel@slitaz.org"
LICENSE="LGPL2.1"
WEB_SITE="https://wiki.gnome.org/Projects/Vala"
LFS="http://www.linuxfromscratch.org/blfs/view/svn/general/vala.html"

TARBALL="$PACKAGE-$VERSION.tar.xz"
WGET_URL="$GNOME_MIRROR/$PACKAGE/${VERSION%.*}/$TARBALL"

BUILD_DEPENDS="automake libtool glib-dev libxslt-dev"

compile_rules() {
	# if graphviz is not installed
	sed -i '115d; 121,137d; 139,140d' configure.ac
	sed -i '/valadoc/d' Makefile.am
	ACLOCAL= autoreconf -fiv

	./configure $CONFIGURE_ARGS &&
	fix libtool &&
	make &&
	make install
}

genpkg_rules() {
	copy @std @dev
	DEPENDS="glib-dev"
	TAGS="compiler"
}
