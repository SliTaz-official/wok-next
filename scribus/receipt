# SliTaz package receipt.

PACKAGE="scribus"
VERSION="1.4.6"
CATEGORY="office"
SHORT_DESC="Professional publishing software"
MAINTAINER="pascal.bellard@slitaz.org"
LICENSE="GPL2"
WEB_SITE="https://www.scribus.net/"

TARBALL="$PACKAGE-$VERSION.tar.xz"
WGET_URL="$SF_MIRROR/$PACKAGE/$TARBALL"

BUILD_DEPENDS="cmake qmake Qt4-dev freetype freetype-dev \
cairo cairo-dev tiff tiff-dev lcms lcms-dev jpeg jpeg-dev libpng16 libpng16-dev \
cups cups-dev fontconfig fontconfig-dev libxml2 libxml2-dev podofo-dev \
ghostscript python python-dev python-pil aspell aspell-dev \
boost-dev openssl openssl-dev zlib tk"

compile_rules() {
	cmake \
		-DCMAKE_INSTALL_PREFIX=/usr \
		. &&
	make $MAKEFLAGS &&
	make DESTDIR=$install install
}

genpkg_rules() {
	mkdir -p $fs/usr/share $fs/usr/lib
	cp -a $install/usr/share/scribus $fs/usr/share
	cp -a $install/usr/lib/scribus $fs/usr/lib
	cp -a $install/usr/bin $fs/usr
	cp -a $install/usr/share/mimelnk $fs/usr/share
	cp -a $stuff/* $fs
	DEPENDS="ghostscript libQtGui libQtXml libQtNetwork cups lcms libxml2 \
	gcc-lib-base aspell python krb5 podofo"
}
