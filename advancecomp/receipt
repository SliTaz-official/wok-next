# SliTaz package receipt v2.

PACKAGE="advancecomp"
VERSION="2.0"
COMMIT="4e04906"
CATEGORY="system-tools"
SHORT_DESC="Recompression utilities for .ZIP, .PNG, .MNG and .GZ"
MAINTAINER="pascal.bellard@slitaz.org"
LICENSE="GPL2"
WEB_SITE="http://www.advancemame.it/comp-readme"
TAGS="compression archive"

TARBALL="$PACKAGE-${COMMIT:-$VERSION}.tar.gz"
WGET_URL="$GITHUB/amadvance/advancecomp/tarball/${COMMIT:-v$VERSION}"

BUILD_DEPENDS="automake zlib-dev"
SPLIT="advancecomp-static"

# Rules to configure and make the package.
compile_rules()
{
	./autogen.sh &&

	# make statically linked tools
	./configure \
		LDFLAGS='-static' \
		--bindir=/usr/sbin \
		$CONFIGURE_ARGS &&
	make && make install &&

	# make dynamically linked tools
	make clean &&
	./configure $CONFIGURE_ARGS && make && make install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	case $PACKAGE in
		advancecomp)
			copy bin/
			DEPENDS="zlib"
			;;
		*-static)
			copy sbin/
			CAT="system-tools|static binary"
			DEPENDS=" "
			;;
	esac
}
