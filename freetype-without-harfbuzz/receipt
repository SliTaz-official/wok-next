# SliTaz package receipt v2.

PACKAGE="freetype-without-harfbuzz"
VERSION="2.6.5"
CATEGORY="x-window"
SHORT_DESC="A free, high-quality, and portable font engine"
MAINTAINER="pankso@slitaz.org"
LICENSE="FTL GPL2"
WEB_SITE="https://www.freetype.org/"
HOST_ARCH="i486 arm"

TARBALL="freetype-$VERSION.tar.bz2"
WGET_URL="$SF_MIRROR/freetype/$TARBALL"

BUILD_DEPENDS="automake libtool autoconf zlib-dev bzip2-dev libpng-dev"
SPLIT="freetype-without-harfbuzz-dev"

# Rules to configure and make the package.
compile_rules()
{
	sed -ri "s:.*(AUX_MODULES.*valid):\1:" modules.cfg
	sed -ri "s:.*(#.*SUBPIXEL_(RENDERING|HINTING 2)) .*:\1:g" \
		include/freetype/config/ftoption.h

	./autogen.sh &&
	./configure \
		--sysconfdir=/etc \
		--disable-static \
		$CONFIGURE_ARGS &&
	make &&
	make install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	case $PACKAGE in
		freetype-without-harfbuzz)
			copy @std
			DEPENDS="bzlib libpng zlib"
			PROVIDE="freetype"
			;;
		freetype-without-harfbuzz-dev)
			copy @dev
			DEPENDS="bzip2-dev libpng-dev zlib-dev"
			PROVIDE="freetype-dev"
			;;
	esac
}
