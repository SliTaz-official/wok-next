# SliTaz package receipt v2.

PACKAGE="eduke32"
VERSION="20110319-1850"
CATEGORY="games"
SHORT_DESC="A port of the classic first-person shooter, Duke Nukem 3D"
MAINTAINER="mallory@sweetpeople.org"
LICENSE="GPL2"

TARBALL="${PACKAGE}_src_${VERSION}.tar.bz2"
WEB_SITE="http://www.eduke32.com/"
WGET_URL="http://dukeworld.duke4.net/$PACKAGE/synthesis/$VERSION/$TARBALL"
TAGS="shooting"

BUILD_DEPENDS="libsdl-dev libsdl-mixer-dev libvorbis-dev gtk+-dev nasm \
mesa-dev glu-dev gcc49"

# Rules to configure and make the package.
compile_rules()
{
	case $ARCH in
		x86_64) Arch='nocona';;
		*)      Arch="$ARCH";;
	esac

	make \
		CC=gcc-49 \
		CXX=g++-49 \
		CFLAGS="-march=$Arch -Os -pipe" \
		$MAKEFLAGS || return 1

	install -Dm755 eduke32   $install/usr/bin/eduke32
	install -Dm755 mapster32 $install/usr/bin/mapster32
}

genpkg_rules() {
	copy @std
	DEPENDS="libsdl libsdl-mixer libvorbis gtk+ eduke32-data"
}
