# SliTaz package receipt v2.

PACKAGE="wireshark"
VERSION="2.0.0"
CATEGORY="network"
SHORT_DESC="Wireshark is an award-winning network protocol analyzer"
MAINTAINER="pankso@slitaz.org"
LICENSE="GPL2"
WEB_SITE="http://www.wireshark.org/"

TARBALL="$PACKAGE-$VERSION.tar.bz2"
WGET_URL="https://1.eu.dl.wireshark.org/src/$TARBALL"

BUILD_DEPENDS="gnutls-dev libgpg-error-dev libcap-dev libpcap-dev gtk+-dev \
libgcrypt-dev flex libtasn1-dev bison perl"

compile_rules() {
	./configure \
		--prefix=/usr \
		--mandir=/usr/share/man \
		--enable-setuid-install \
		--with-qt=no \
		--with-gtk2=yes \
		--with-gtk3=no \
		$CONFIGURE_ARGS &&
	sed -i 's/mozilla/browser/' config.h &&
	make $MAKEFLAGS &&
	make install
}

genpkg_rules() {
	copy @std
	DEPENDS="gnutls libgpg-error libcap gtk+ pcre xorg-libXdamage libcomerr3 \
	attr libgcrypt portaudio libpcap libkrb5"
	TAGS="network analysis"
}
