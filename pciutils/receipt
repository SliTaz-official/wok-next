# SliTaz package receipt v2.

PACKAGE="pciutils"
VERSION="3.5.6"
CATEGORY="system-tools"
SHORT_DESC="Linux PCI Utilities"
MAINTAINER="pankso@slitaz.org"
LICENSE="GPL2"
WEB_SITE="http://mj.ucw.cz/sw/pciutils/"
LFS="http://www.linuxfromscratch.org/blfs/view/stable/general/pciutils.html"

TARBALL="$PACKAGE-$VERSION.tar.xz"
WGET_URL="https://www.kernel.org/pub/software/utils/pciutils/$TARBALL"

BUILD_DEPENDS="kmod-dev eudev-dev zlib-dev"
SPLIT="pciutils-dev"

compile_rules() {
	make \
		PREFIX=/usr \
		SBINDIR=/usr/bin \
		SHAREDIR=/usr/share/hwdata \
		SHARED=yes &&
	make \
		PREFIX=/usr \
		SBINDIR=/usr/bin \
		SHAREDIR=/usr/share/hwdata \
		SHARED=yes \
		install install-lib || return 1

	chmod -v 755 $install/usr/lib/libpci.so.$VERSION
}

genpkg_rules() {
	case $PACKAGE in
		pciutils)
			copy @std
			rm -rf $fs/usr/share/
			DEPENDS="eudev kmod zlib   pciids"
			;;
		*-dev)
			copy @dev
			;;
	esac
}
