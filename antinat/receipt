# SliTaz package receipt v2.

PACKAGE="antinat"
VERSION="0.91"
CATEGORY="network"
SHORT_DESC="Flexible SOCKS server & client library for proxy-based applications"
MAINTAINER="pascal.bellard@slitaz.org"
LICENSE="GPL2"
WEB_SITE="http://www.malsmith.net/antinat/"

TARBALL="$PACKAGE-$VERSION.tar.bz2"
#WGET_URL="$SF_MIRROR/$PACKAGE/$TARBALL"
WGET_URL="http://www.malsmith.net/download/?obj=antinat/$VERSION/antinat-source.tar.bz2"

BUILD_DEPENDS="gfortran expat-dev"
SPLIT="antinat-dev"

compile_rules() {
	./configure $CONFIGURE_ARGS &&
	fix libtool &&
	make &&
	make install || return 1

	# make file readable for web interface, revert file permissions in post-install
	chmod a+r $install/etc/antinat.xml
}

genpkg_rules() {
	case $PACKAGE in
		antinat)
			copy @std var/
			DEPENDS="expat"
			CONFIG_FILES="/etc/antinat.xml"
			;;
		*-dev)
			copy @dev
			;;
	esac
}

post_install_antinat() {
	chmod 600 $1/etc/antinat.xml
}
