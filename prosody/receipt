# SliTaz package receipt.

PACKAGE="prosody"
VERSION="0.9.14"
CATEGORY="network"
SHORT_DESC="xmpp-jabber server in lua"
MAINTAINER="allan316@gmail.com"
LICENSE="MIT"
WEB_SITE="http://prosody.im/"

TARBALL="$PACKAGE-$VERSION.tar.gz"
WGET_URL="$WEB_SITE/downloads/source/$TARBALL"

BUILD_DEPENDS="lua5.1-dev libidn-dev openssl-dev luaexpat luasocket \
luafilesystem libidn-dev libcrypto"

compile_rules() {
	./configure \
		--prefix=/usr \
		--ostype=linux \
		--c-compiler=${HOST_SYSTEM}-gcc \
		--linker=${HOST_SYSTEM}-gcc \
		--with-lua=/usr \
		--with-lua-lib=/usr/lib \
		--runwith=lua5.1 \
		--with-lua-include=/usr/include/lua/5.1 &&
	make &&
	make DESTDIR=$install install
}

genpkg_rules() {
	copy @std
	DEPENDS="lua5.1 libidn openssl luaexpat luasocket luafilesystem libidn \
	libcrypto"
}
