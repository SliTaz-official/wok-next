# SliTaz package receipt v2.

PACKAGE="libdesktop-agnostic"
VERSION="0.3.94.12" # latest release 0.3.94 plus 12 commits ahead (13/11/26 -> 16/05/02)
COMMIT="be0f0cb"
CATEGORY="x-window"
SHORT_DESC="Desktop agnostic library for GLib-based projects"
MAINTAINER="pankso@slitaz.org"
LICENSE="LGPL2.1"
WEB_SITE="https://launchpad.net/libdesktop-agnostic"

TARBALL="libdesktop-agnostic-${COMMIT:-$VERSION}.tar.gz"
WGET_URL="https://github.com/p12tic/libdesktop-agnostic/archive/${COMMIT:-v$VERSION}.tar.gz"

BUILD_DEPENDS="python-dev vala gettext intltool gtk+-dev GConf-dev \
gobject-introspection-dev pygobject-dev pygtk-dev"
SPLIT="libdesktop-agnostic-dev"

compile_rules() {
	# site script isn't used
	./waf configure \
		--prefix=/usr \
		--sysconfdir=/etc \
		--config-backends=gconf \
		--vfs-backends=gio \
		--desktop-entry-backends=glib &&
	./waf &&
	./waf install \
		--prefix=/usr \
		--destdir=$DESTDIR
}

genpkg_rules() {
	case $PACKAGE in
		libdesktop-agnostic)
			copy @std
			DEPENDS="GConf atk cairo fontconfig freetype gdk-pixbuf glib gtk+ \
			pango python"
			;;
		*-dev)
			copy @dev
			DEPENDS="libdesktop-agnostic glib-dev gtk+-dev"
			;;
	esac
}
