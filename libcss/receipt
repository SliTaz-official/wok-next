# SliTaz package receipt v2.

PACKAGE="libcss"
VERSION="0.6.1"
CATEGORY="system-tools"
SHORT_DESC="CSS parser and selection engine"
MAINTAINER="erjo@slitaz.org"
LICENSE="MIT"
WEB_SITE="http://www.netsurf-browser.org/projects/libcss/"
#HOST_ARCH="i486 arm"

TARBALL="$PACKAGE-$VERSION-src.tar.gz"
WGET_URL="http://download.netsurf-browser.org/libs/releases/$TARBALL"

BUILD_DEPENDS="netsurf-buildsystem libwapcaplet-dev libparserutils-dev"
SPLIT="libcss-dev"

# Rules to configure and make the package.
compile_rules()
{
	sed 's:_BSD_SOURCE:_DEFAULT_SOURCE:' -i Makefile &&
	export CFLAGS="-Wno-error=unused-but-set-variable" &&

	make INCLUDEDIR=include LIBDIR=lib PREFIX=/usr COMPONENT_TYPE="lib-shared" &&
	make INCLUDEDIR=include LIBDIR=lib PREFIX=/usr COMPONENT_TYPE="lib-shared" \
		DESTDIR="$install" install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	case $PACKAGE in
		libcss)
			copy @std
			DEPENDS="libparserutils libwapcaplet"
			;;
		*-dev)
			copy @dev
			DEPENDS="libcss libparserutils-dev libwapcaplet-dev"
			;;
	esac
}
