# SliTaz package receipt v2.

PACKAGE="opentyrian"
VERSION="r886"
CATEGORY="games"
SHORT_DESC="OpenTyrian is a port of the DOS shoot-em-up Tyrian"
MAINTAINER="mallory@sweetpeople.org"
LICENSE="GPL2"
WEB_SITE="http://code.google.com/p/opentyrian/"

TARBALL="$PACKAGE-$VERSION.tar.bz2"
WGET_URL="mercurial|https://opentyrian.googlecode.com/hg/"

BUILD_DEPENDS="libsdl-dev libsdl-mixer-dev libsdl-net-dev mercurial"

compile_rules() {
	make release || return 1

	mkdir -p \
		$install/usr/bin $fs/usr/share/applications \
		$install/usr/share/pixmaps \
		$install/usr/games/opentyrian
	cp $src/opentyrian                $install/usr/games/opentyrian
	cp $src/linux/opentyrian.desktop  $install/usr/share/applications
	cp $src/linux/icons/tyrian-32.png $install/usr/share/pixmaps/opentyrian.png
	cat > $install/usr/bin/opentyrian <<EOF
#!/bin/sh
here=$(pwd)
cd /usr/games/opentyrian
./opentyrian
cd $here
EOF
	chmod +x $install/usr/bin/opentyrian
}

genpkg_rules() {
	copy @std
	DEPENDS="libsdl libsdl-mixer libsdl-net tyrian"
}
