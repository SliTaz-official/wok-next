# SliTaz package receipt v2.

PACKAGE="postgis"
VERSION="2.4.0"
CATEGORY="misc"
SHORT_DESC="Support for geographic objects to PostgreSQL"
MAINTAINER="erjo@slitaz.org"
LICENSE="GPL2"
WEB_SITE="http://postgis.refractions.net/"
TARBALL="$PACKAGE-$VERSION.tar.gz"
WGET_URL="http://download.osgeo.org/postgis/source/$TARBALL"

BUILD_DEPENDS="postgresql-dev geos-dev proj-dev libxml2-dev \
gtk+-dev gdal-dev jasper-dev curl-dev libpostgresqlclient tiff"
SPLIT="postgis-gui"

# Rules to configure and make the package.
compile_rules()
{
	touch config.rpath
	./configure --with-gui $CONFIGURE_ARGS \
			&& make -j 1 && make install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	case $PACKAGE in
	postgis)
		DEPENDS="geos proj libpostgresqlclient libxml2 libgdal"
		cp -a $install/* $fs
		rm -f $fs/usr/bin/shp2pgsql-gui 
		;;
	postgis-gui)
		CAT="misc|Support for geographic objects to PostgreSQL"
		DEPENDS="gtk+ postgis"
		mkdir -p $fs/usr/bin
		cp -a $install/usr/bin/shp2pgsql-gui $fs/usr/bin 
		;;
	esac
}
